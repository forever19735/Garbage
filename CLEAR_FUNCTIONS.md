# 清空和重置功能說明

## 🗑️ 清空功能概述

為了便於管理和維護 LINE Bot 的資料，新增了完整的清空和重置功能。這些功能可以幫助您：
- 清空特定週的成員安排
- 清空所有成員輪值資料
- 清空所有群組 ID 設定
- 一鍵重置所有資料

## 📋 功能列表

### 1. 成員管理清空功能

#### `@clear_week 週數`
- **功能**：清空指定週的成員安排
- **格式**：`@clear_week 1`
- **範例**：
  ```
  @clear_week 1    # 清空第1週的成員
  @clear_week 3    # 清空第3週的成員
  ```
- **回應**：`✅ 已清空第 1 週的成員安排 (原有成員: Alice, Bob)`

#### `@clear_members`
- **功能**：清空所有週的成員安排
- **格式**：`@clear_members`
- **回應**：`✅ 已清空所有成員輪值安排 (原有 3 週資料)`

### 2. 群組管理清空功能

#### `@clear_groups`
- **功能**：清空所有群組 ID
- **格式**：`@clear_groups`
- **回應**：`✅ 已清空所有群組 ID (原有 2 個)`

### 3. 系統狀態查看

#### `@status`
- **功能**：顯示完整的系統狀態摘要
- **格式**：`@status`
- **內容包括**：
  - 成員輪值狀態 (總週數、目前週)
  - LINE 群組狀態 (群組數量、群組列表)
  - 排程設定狀態 (排程器狀態、時區、任務資訊)
  - 目前時間

### 4. 完整重置功能

#### `@reset_all`
- **功能**：重置所有資料 (成員安排 + 群組 ID)
- **格式**：`@reset_all`
- **回應**：`🔄 已重置所有資料 (清空 3 週成員安排 + 2 個群組 ID)`
- **⚠️ 警告**：此操作無法復原，請謹慎使用

## 🔧 技術實作細節

### 持久化儲存
- 所有清空操作都會立即更新 JSON 檔案
- 確保資料變更在應用重啟後仍然有效
- 自動儲存機制：`save_groups()` 和 `save_group_ids()`

### 錯誤處理
- 輸入驗證：檢查週數格式、範圍等
- 狀態檢查：確認資料存在才執行清空
- 詳細回饋：提供清楚的操作結果訊息

### 安全性
- 資料備份：清空前記錄原始資料內容
- 操作日誌：DEBUG 訊息記錄所有變更
- 明確確認：顯示清空的具體內容

## 📊 使用場景

### 1. 定期維護
```
@clear_members    # 新學期開始，清空舊的成員安排
@clear_groups     # 搬家或重新部署時清空群組設定
```

### 2. 測試環境
```
@reset_all        # 完全重置，準備新的測試資料
@status          # 確認重置結果
```

### 3. 部分調整
```
@clear_week 2     # 只調整特定週的安排
@status          # 檢查調整後的狀態
```

## 🆘 幫助系統

新功能已整合到幫助系統中：

- `@help members` - 查看成員管理指令 (包含清空功能)
- `@help groups` - 查看群組管理指令 (包含清空功能)  
- `@help test` - 查看測試指令 (包含狀態查詢和重置功能)

## 🎯 最佳實踐

1. **使用前確認**：使用 `@status` 查看目前狀態
2. **漸進式清空**：先使用 `@clear_week` 清空特定週，再考慮 `@clear_members`
3. **完整重置謹慎使用**：`@reset_all` 僅在確實需要完全重新開始時使用
4. **定期備份**：重要資料可透過 `@status` 或 `@members` 先查看並記錄

## 📁 相關檔案

- `group_ids.json` - 群組 ID 持久化檔案
- `groups.json` - 成員輪值持久化檔案
- `main.py` - 主要實作程式碼

這些清空功能讓 LINE Bot 的管理更加靈活和便利！ 🚀
