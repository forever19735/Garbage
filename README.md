# ğŸ—‘ï¸ LINE åƒåœ¾æ”¶é›†æé†’ Bot

æ™ºèƒ½ç¾¤çµ„è¼ªå€¼ç®¡ç†ç³»çµ±ï¼Œæ”¯æ´ **æ¯å€‹ç¾¤çµ„ç¨ç«‹è¨­å®š** çš„ LINE Botã€‚è‡ªå‹•æ¨æ’­æé†’ã€å½ˆæ€§æ’ç¨‹è¨­å®šã€å¤šç¾¤çµ„åˆ†åˆ¥ç®¡ç†ã€‚

âœ¨ **Firebase ç´”é›²ç«¯æ¶æ§‹ - ä¼æ¥­ç´šå¯é æ€§ï¼Œç„¡éœ€è¤‡é›œè¨­å®š**

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ¢ å¤šç¾¤çµ„ç¨ç«‹ç®¡ç†
- **ç¾¤çµ„éš”é›¢**ï¼šæ¯å€‹ LINE ç¾¤çµ„éƒ½æœ‰ç¨ç«‹çš„æˆå“¡è¼ªå€¼è¡¨
- **ç¨ç«‹æ’ç¨‹**ï¼šæ¯å€‹ç¾¤çµ„å¯è¨­å®šä¸åŒçš„æ¨æ’­æ™‚é–“å’Œæ˜ŸæœŸ
- **è‡ªå‹•è¨˜éŒ„**ï¼šBot åŠ å…¥ç¾¤çµ„æ™‚è‡ªå‹•è¨˜éŒ„ï¼Œé›¢é–‹æ™‚è‡ªå‹•æ¸…ç†
- **åˆ†åˆ¥æ¨æ’­**ï¼šä¸åŒç¾¤çµ„åœ¨å„è‡ªè¨­å®šçš„æ™‚é–“æ”¶åˆ°å€‹åˆ¥æé†’

### ğŸ”„ è‡ªç„¶é€±è¼ªå€¼ç³»çµ±
- **æ™ºèƒ½è¨ˆç®—**ï¼šåŸºæ–¼çœŸå¯¦é€±ä¸€åˆ°é€±æ—¥çš„è‡ªç„¶é€±å¾ªç’°
- **å½ˆæ€§æˆå“¡**ï¼šæ¯é€±å¯è¨­å®šä¸åŒæ•¸é‡çš„è² è²¬äºº
- **é€±å…§æŒ‰æ—¥è¼ªå€¼**ï¼šåŒé€±å…§ä¸åŒæ¨æ’­æ—¥åˆ†é…ä¸åŒæˆå“¡
- **è‡ªå‹•åˆ‡æ›**ï¼šæ¯å€‹è‡ªç„¶é€±è‡ªå‹•è¼ªæ›¿ï¼Œç„¡éœ€æ‰‹å‹•ç®¡ç†
- **åŸºæº–æ—¥æœŸ**ï¼šé¦–æ¬¡è¨­å®šæ™‚è‡ªå‹•è¨˜éŒ„ï¼Œå¯éš¨æ™‚é‡ç½®

### â° å½ˆæ€§æ’ç¨‹æ¨æ’­
- **ç¾¤çµ„å°ˆå±¬**ï¼šæ¯å€‹ç¾¤çµ„å¯è¨­å®šå°ˆå±¬çš„æ¨æ’­æ™‚é–“
- **å¤šæ—¥æ¨æ’­**ï¼šæ”¯æ´ä¸€é€±å…§å¤šå¤©æ¨æ’­ï¼ˆé€±ä¸€åˆ°é€±æ—¥ï¼‰
- **å³æ™‚é è¦½**ï¼šè¨­å®šå¾Œç«‹å³é¡¯ç¤ºä¸‹æ¬¡åŸ·è¡Œæ™‚é–“
- **å°åŒ—æ™‚å€**ï¼šå…¨ç¨‹ä½¿ç”¨ Asia/Taipei æ™‚å€

### ğŸ›ï¸ è±å¯Œç®¡ç†åŠŸèƒ½
- **æŒ‡ä»¤åˆ†é¡**ï¼šæ’ç¨‹ã€æˆå“¡ã€ç¾¤çµ„ã€æ¸¬è©¦ç­‰åˆ†é¡ç®¡ç†
- **ç‹€æ…‹ç›£æ§**ï¼šå®Œæ•´çš„ç³»çµ±ç‹€æ…‹æª¢è¦–
- **é‡ç½®é¸é …**ï¼šå¯é¸æ“‡æ€§é‡ç½®ä¸åŒè³‡æ–™
- **ä½¿ç”¨èªªæ˜**ï¼šå…§å»ºå®Œæ•´çš„å¹«åŠ©ç³»çµ±
- **ç°¡åŒ–æŒ‡ä»¤**ï¼šä½¿ç”¨ç›´è§€çš„çŸ­æŒ‡ä»¤ï¼ˆ@time, @day, @weekï¼‰

### ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. Firebase è¨­å®šï¼ˆä¸€æ¬¡æ€§è¨­å®šï¼‰

1. å‰å¾€ [Firebase Console](https://console.firebase.google.com/)
2. å»ºç«‹æ–°å°ˆæ¡ˆæˆ–é¸æ“‡ç¾æœ‰å°ˆæ¡ˆ
3. å•Ÿç”¨ **Firestore Database**
4. åœ¨å°ˆæ¡ˆè¨­å®šä¸­å»ºç«‹ **æœå‹™å¸³æˆ¶é‡‘é‘°**
5. ä¸‹è¼‰ JSON æ†‘è­‰æª”æ¡ˆï¼Œè¤‡è£½å®Œæ•´å…§å®¹

### 2. éƒ¨ç½²åˆ° Railway

1. åˆ° [Railway](https://railway.app) å»ºç«‹æ–°å°ˆæ¡ˆ
2. é€£çµä½ çš„ GitHub å°ˆæ¡ˆï¼ˆä¸Šå‚³æ­¤è³‡æ–™å¤¾ï¼‰  
3. åœ¨ Railway ä¸­è¨­å®šç’°å¢ƒè®Šæ•¸ï¼š

| è®Šæ•¸åç¨± | èªªæ˜ | å¿…è¦æ€§ |
|-----------|------|--------|
| `LINE_CHANNEL_ACCESS_TOKEN` | å¾ LINE Developers å–å¾— | âœ… å¿…è¦ |
| `LINE_CHANNEL_SECRET` | å¾ LINE Developers å–å¾— | âœ… å¿…è¦ |
| `FIREBASE_CONFIG_JSON` | Firebase æœå‹™å¸³æˆ¶å®Œæ•´ JSON | âœ… å¿…è¦ |

ğŸ’¡ **åªéœ€è¦ 3 å€‹ç’°å¢ƒè®Šæ•¸ï¼Œè¨­å®šè¶…ç°¡å–®ï¼**

4. éƒ¨ç½²å®Œæˆå¾Œï¼Œå°‡ Railway æä¾›çš„ URL è¨­å®šç‚º LINE Developers çš„ Webhook URL

### 3. LINE Developers è¨­å®š

1. å‰å¾€ [LINE Developers Console](https://developers.line.biz/)
2. å»ºç«‹æ–°çš„ Provider å’Œ Messaging API Channel
3. å–å¾— **Channel Access Token** å’Œ **Channel Secret**
4. åœ¨ Webhook settings ä¸­è¨­å®šä½ çš„ Railway URL
5. å°‡ Bot åŠ å…¥åˆ°ç›®æ¨™ LINE ç¾¤çµ„

### 4. åˆå§‹è¨­å®šï¼ˆåœ¨ LINE ç¾¤çµ„ä¸­ï¼‰

```
@time 18:00                  # è¨­å®šæœ¬ç¾¤çµ„æ¨æ’­æ™‚é–“  
@day mon,thu                 # è¨­å®šæœ¬ç¾¤çµ„æ¨æ’­æ—¥æœŸ
@week 1 Alice,Bob            # è¨­å®šç¬¬1é€±æˆå“¡
@week 2 Charlie,David        # è¨­å®šç¬¬2é€±æˆå“¡
@schedule                    # æª¢æŸ¥æœ¬ç¾¤çµ„æ’ç¨‹ç‹€æ…‹
```

ğŸ’¡ **èˆŠæŒ‡ä»¤ä»ç„¶æ”¯æ´**ï¼Œæ–°èˆŠæŒ‡ä»¤å¯ä»¥æ··ç”¨ï¼

## ï¿½ğŸ“‹ æŒ‡ä»¤å¤§å…¨

### ğŸ”¥ å¸¸ç”¨æŒ‡ä»¤
- `@schedule` - æŸ¥çœ‹æœ¬ç¾¤çµ„æ¨æ’­æ’ç¨‹
- `@current` - æŸ¥çœ‹æœ¬é€±è² è²¬äºº
- `@members` - æŸ¥çœ‹æœ¬ç¾¤çµ„å®Œæ•´è¼ªå€¼è¡¨  
- `@status` - æŸ¥çœ‹ç³»çµ±ç‹€æ…‹

### âš™ï¸ æ’ç¨‹è¨­å®šï¼ˆç¾¤çµ„å°ˆå±¬ï¼‰
- `@time 18:30` - è¨­å®šæœ¬ç¾¤çµ„æ¨æ’­æ™‚é–“
- `@day mon,thu` - è¨­å®šæœ¬ç¾¤çµ„æ¨æ’­æ˜ŸæœŸ  
- `@cron tue,fri 20 15` - åŒæ™‚è¨­å®šæ˜ŸæœŸå’Œæ™‚é–“

### ğŸ‘¥ æˆå“¡ç®¡ç†ï¼ˆç¾¤çµ„å°ˆå±¬ï¼‰
- `@week 1 Alice,Bob` - è¨­å®šç¬¬1é€±æˆå“¡
- `@addmember 1 Charlie` - æ·»åŠ æˆå“¡åˆ°ç¬¬1é€±
- `@removemember 1 Alice` - å¾ç¬¬1é€±ç§»é™¤æˆå“¡
- `@clear_week 1` - æ¸…ç©ºç¬¬1é€±æˆå“¡

### ğŸ”„ é‡ç½®åŠŸèƒ½
- `@reset_date` - é‡ç½®åŸºæº–æ—¥æœŸç‚ºä»Šå¤©
- `@backup` - æŸ¥çœ‹ Firebase å‚™ä»½ç‹€æ…‹

### â˜ï¸ Firebase é›²ç«¯åŠŸèƒ½
- `@firebase` - æŸ¥çœ‹ Firebase é€£æ¥ç‹€æ…‹
- `@debug_env` - ç’°å¢ƒè®Šæ•¸è¨ºæ–·

### ğŸ¤– è‡ªå‹•å‚™ä»½åŠŸèƒ½
- **Firebase é›²ç«¯å‚™ä»½**ï¼šè³‡æ–™å®‰å…¨å­˜å„²åœ¨ Google Firebase
- **è‡ªå‹•ç‰ˆæœ¬æ§åˆ¶**ï¼šFirebase å…§å»ºå‚™ä»½å’Œæ¢å¾©æ©Ÿåˆ¶
- **å³æ™‚åŒæ­¥**ï¼šå¤šç’°å¢ƒè³‡æ–™è‡ªå‹•åŒæ­¥
- **ä¼æ¥­ç´šå¯é æ€§**ï¼š99.99% çš„å¯ç”¨æ€§ä¿è­‰
- **ç„¡éœ€æ‰‹å‹•è¨­å®š**ï¼šå®Œå…¨è‡ªå‹•åŒ–çš„é›²ç«¯å­˜å„²

### â“ å¹«åŠ©ç³»çµ±
- `@help` - é¡¯ç¤ºå®Œæ•´æŒ‡ä»¤åˆ—è¡¨
- `@help schedule` - æ’ç¨‹ç®¡ç†æŒ‡ä»¤èªªæ˜
- `@help members` - æˆå“¡ç®¡ç†æŒ‡ä»¤èªªæ˜
- `@help manage` - ç®¡ç†åŠŸèƒ½æŒ‡ä»¤èªªæ˜

## ğŸ¯ ä½¿ç”¨æƒ…å¢ƒç¯„ä¾‹

### æƒ…å¢ƒ 1ï¼šé€±å…§æŒ‰æ—¥è¼ªå€¼
```
@week 1 Debby,John           # ç¬¬1é€±ï¼šDebby, John
@day mon,thu                 # æ˜ŸæœŸä¸€å’Œæ˜ŸæœŸå››æ¨æ’­
@time 09:00                  # æ¯å¤© 09:00 æé†’
```
**å¯¦éš›é‹ä½œæ•ˆæœï¼š**
- **æ˜ŸæœŸä¸€ 09:00**ï¼šæ¨æ’­ "è¼ªåˆ° Debby æ”¶åƒåœ¾ï¼"
- **æ˜ŸæœŸå›› 09:00**ï¼šæ¨æ’­ "è¼ªåˆ° John æ”¶åƒåœ¾ï¼"
- **é€±å…§ä¸åŒæ—¥æœŸæœ‰ä¸åŒè² è²¬äºº**

### æƒ…å¢ƒ 2ï¼šå¤šéƒ¨é–€ç¨ç«‹ç®¡ç†

**éƒ¨é–€ A ç¾¤çµ„è¨­å®šï¼š**
```
@time 17:00                  # Aéƒ¨é–€ï¼šæ¯å¤© 17:00 æé†’
@day mon,wed,fri             # é€±ä¸€ã€ä¸‰ã€äº”æé†’
@week 1 å¼µå°æ˜,æå°è¯         # ç¬¬1é€±ï¼šå¼µå°æ˜ã€æå°è¯
@week 2 ç‹å¤§é›„               # ç¬¬2é€±ï¼šç‹å¤§é›„
```

**éƒ¨é–€ B ç¾¤çµ„è¨­å®šï¼š**
```
@time 09:00                  # Béƒ¨é–€ï¼šæ¯å¤© 09:00 æé†’
@day tue,thu                 # é€±äºŒã€å››æé†’
@week 1 é™³å°ç¾               # ç¬¬1é€±ï¼šé™³å°ç¾
@week 2 æ—å¿—æ˜,é»ƒå¤§åŒ         # ç¬¬2é€±ï¼šæ—å¿—æ˜ã€é»ƒå¤§åŒ
```

**å¯¦éš›é‹ä½œæ•ˆæœï¼š**
- éƒ¨é–€ Aï¼šé€±ä¸€ä¸‰äº” 17:00 æ”¶åˆ°è‡ªå·±çš„æˆå“¡æé†’
- éƒ¨é–€ Bï¼šé€±äºŒå›› 09:00 æ”¶åˆ°è‡ªå·±çš„æˆå“¡æé†’
- å®Œå…¨ç¨ç«‹é‹ä½œï¼Œäº’ä¸å¹²æ“¾

## ğŸ› ï¸ æŠ€è¡“æ¶æ§‹

### æ ¸å¿ƒæŠ€è¡“æ£§
- **Flask** - Web æ¡†æ¶
- **LINE Bot SDK v3** - LINE è¨Šæ¯è™•ç†
- **APScheduler** - èƒŒæ™¯æ’ç¨‹ä»»å‹™ï¼ˆæ”¯æ´å¤šç¾¤çµ„æ’ç¨‹ï¼‰
- **Firebase Firestore** - é›²ç«¯è³‡æ–™åº«å­˜å„²
- **pytz** - æ™‚å€è™•ç†

### ç‰¹è‰²è¨­è¨ˆ
- **Firebase ç´”é›²ç«¯**ï¼šæ‰€æœ‰è³‡æ–™å­˜å„²åœ¨ Google Firebase
- **ç¾¤çµ„éš”é›¢å„²å­˜**ï¼šæ¯å€‹ç¾¤çµ„çš„è³‡æ–™å®Œå…¨åˆ†é›¢
- **ç¨ç«‹æ’ç¨‹ç®¡ç†**ï¼šæ¯å€‹ç¾¤çµ„æœ‰è‡ªå·±çš„æ¨æ’­ä»»å‹™
- **è‡ªç„¶é€±ç®—æ³•**ï¼šåŸºæ–¼é€±ä¸€ç‚ºèµ·å§‹çš„çœŸå¯¦é€±æœŸè¨ˆç®—
- **å®¹éŒ¯è¨­è¨ˆ**ï¼šå®Œæ•´çš„ä¾‹å¤–è™•ç†å’ŒéŒ¯èª¤æç¤º
- **æ¨¡çµ„åŒ–çµæ§‹**ï¼šæ¸…æ™°çš„åŠŸèƒ½åˆ†é›¢å’Œç¨‹å¼æ¶æ§‹

### é›²ç«¯æ¶æ§‹å„ªå‹¢
- **ç„¡å–®é»æ•…éšœ**ï¼šFirebase åˆ†æ•£å¼æ¶æ§‹
- **è‡ªå‹•æ“´å±•**ï¼šéš¨ä½¿ç”¨é‡è‡ªå‹•èª¿æ•´
- **å…¨çƒåŒæ­¥**ï¼šå¤šåœ°å€è³‡æ–™ä¸­å¿ƒ
- **å³æ™‚å‚™ä»½**ï¼šè‡ªå‹•ç‰ˆæœ¬æ§åˆ¶å’Œæ¢å¾©
- **é›¶ç¶­è­·**ï¼šç„¡éœ€ç®¡ç†è³‡æ–™åº«æˆ–ä¼ºæœå™¨

### è³‡æ–™çµæ§‹
```json
{
  "Firebase Firestore é›†åˆ": {
    "bot_config/groups": {
      "Cç¾¤çµ„ID1": {
        "1": ["Alice", "Bob"],
        "2": ["Charlie"]
      },
      "Cç¾¤çµ„ID2": {
        "1": ["David", "Eve"],
        "2": ["Frank"]
      }
    },
    "bot_config/group_schedules": {
      "Cç¾¤çµ„ID1": {
        "days": "mon,wed,fri",
        "hour": 17,
        "minute": 0
      },
      "Cç¾¤çµ„ID2": {
        "days": "tue,thu",
        "hour": 9,
        "minute": 30
      }
    },
    "backups/": {
      "[timestamp]": "è‡ªå‹•å‚™ä»½è¨˜éŒ„"
    }
  }
}
```

## ğŸ“Š æ¨æ’­è¨Šæ¯ç¯„ä¾‹

**ç¾¤çµ„ A æ”¶åˆ°çš„è¨Šæ¯ï¼š**
```
ğŸ—‘ï¸ ä»Šå¤© 10/28 (é€±äºŒ) è¼ªåˆ° Aliceã€Bob æ”¶åƒåœ¾ï¼
```

**ç¾¤çµ„ B æ”¶åˆ°çš„è¨Šæ¯ï¼š**
```
ğŸ—‘ï¸ ä»Šå¤© 10/28 (é€±äºŒ) è¼ªåˆ° David æ”¶åƒåœ¾ï¼
```

## ğŸ”§ æœ¬åœ°é–‹ç™¼

### ç’°å¢ƒéœ€æ±‚
- Python 3.8+
- pip

### å®‰è£æ­¥é©Ÿ
```bash
# 1. å…‹éš†å°ˆæ¡ˆ
git clone https://github.com/forever19735/Garbage.git
cd Garbage

# 2. å®‰è£ä¾è³´
pip install -r requirements.txt

# 3. è¨­å®šç’°å¢ƒè®Šæ•¸ï¼ˆå»ºç«‹ .env æª”æ¡ˆï¼‰
echo "LINE_CHANNEL_ACCESS_TOKEN=ä½ çš„_access_token" > .env
echo "LINE_CHANNEL_SECRET=ä½ çš„_channel_secret" >> .env
echo "FIREBASE_CONFIG_JSON=ä½ çš„_firebase_config_json" >> .env

# 4. åŸ·è¡Œæ‡‰ç”¨
python main.py
```

### æ¸¬è©¦åŠŸèƒ½
```python
# æ¸¬è©¦ Firebase é€£æ¥
from firebase_service import firebase_service_instance

# æª¢æŸ¥ Firebase ç‹€æ…‹
status = firebase_service_instance.is_available()
print(f"Firebase é€£æ¥ç‹€æ…‹: {status}")

# æ¸¬è©¦ç¾¤çµ„ç¨ç«‹åŠŸèƒ½
from main import get_current_group, update_schedule

# æŸ¥çœ‹ç‰¹å®šç¾¤çµ„ç•¶å‰è² è²¬äºº
current = get_current_group("Cç¾¤çµ„ID")
print(f"ç¾¤çµ„ç•¶å‰è² è²¬äºº: {current}")

# è¨­å®šç¾¤çµ„å°ˆå±¬æ’ç¨‹
result = update_schedule("Cç¾¤çµ„ID", "mon,fri", 8, 30)
print(f"æ’ç¨‹è¨­å®šçµæœ: {result}")
```

## ğŸ¤ è²¢ç»æŒ‡å—

æ­¡è¿æäº¤ Issue å’Œ Pull Requestï¼

### é–‹ç™¼è¦ç¯„
- ä½¿ç”¨ Python æ¨™æº–çš„ç¨‹å¼ç¢¼é¢¨æ ¼
- æ–°å¢åŠŸèƒ½è«‹åŒ…å«é©ç•¶çš„è¨»è§£
- é‡è¦è®Šæ›´è«‹æ›´æ–° README

## â˜ï¸ Firebase é›²ç«¯å­˜å„²

### ğŸ”¥ Firebase å„ªå‹¢
æœ¬ç³»çµ±æ¡ç”¨ Google Firebase Firestore ä½œç‚ºé›²ç«¯è³‡æ–™åº«ï¼Œæä¾›ï¼š

#### ğŸš€ ä¼æ¥­ç´šå¯é æ€§
- **99.99% å¯ç”¨æ€§**ï¼šGoogle å…¨çƒåŸºç¤è¨­æ–½
- **è‡ªå‹•å‚™ä»½**ï¼šå³æ™‚ç‰ˆæœ¬æ§åˆ¶å’Œç½é›£æ¢å¾©
- **å¤šåœ°å€åŒæ­¥**ï¼šå…¨çƒè³‡æ–™ä¸­å¿ƒåˆ†æ•£å¼å­˜å„²
- **é›¶å–®é»æ•…éšœ**ï¼šåˆ†æ•£å¼æ¶æ§‹è¨­è¨ˆ

#### âš¡ é–‹ç™¼è€…å‹å–„
- **å³æ™‚åŒæ­¥**ï¼šè³‡æ–™è®Šæ›´ç«‹å³ç”Ÿæ•ˆ
- **ç„¡éœ€ç¶­è­·**ï¼šGoogle è² è²¬æ‰€æœ‰åŸºç¤è¨­æ–½
- **è‡ªå‹•æ“´å±•**ï¼šéš¨ä½¿ç”¨é‡è‡ªå‹•èª¿æ•´æ•ˆèƒ½
- **ç°¡å–®è¨­å®š**ï¼šåªéœ€ä¸€å€‹ JSON æ†‘è­‰æª”æ¡ˆ

#### ğŸ”’ å®‰å…¨æ€§ä¿éšœ
- **åŠ å¯†å‚³è¼¸**ï¼šHTTPS/TLS åŠ å¯†
- **å­˜å–æ§åˆ¶**ï¼šFirebase å®‰å…¨è¦å‰‡
- **èº«åˆ†é©—è­‰**ï¼šæœå‹™å¸³æˆ¶é‡‘é‘°é©—è­‰
- **å¯©è¨ˆæ—¥èªŒ**ï¼šå®Œæ•´çš„æ“ä½œè¨˜éŒ„

### ğŸ“‹ Firebase è¨­å®šæ­¥é©Ÿ

#### 1. å»ºç«‹ Firebase å°ˆæ¡ˆ
1. å‰å¾€ [Firebase Console](https://console.firebase.google.com/)
2. é»æ“Šã€Œå»ºç«‹å°ˆæ¡ˆã€æˆ–é¸æ“‡ç¾æœ‰å°ˆæ¡ˆ
3. æŒ‰ç…§æŒ‡ç¤ºå®Œæˆå°ˆæ¡ˆè¨­å®š

#### 2. å•Ÿç”¨ Firestore Database
1. åœ¨ Firebase æ§åˆ¶å°é¸æ“‡ã€ŒFirestore Databaseã€
2. é»æ“Šã€Œå»ºç«‹è³‡æ–™åº«ã€
3. é¸æ“‡ã€Œæ¸¬è©¦æ¨¡å¼ã€ï¼ˆä¹‹å¾Œå¯èª¿æ•´å®‰å…¨è¦å‰‡ï¼‰
4. é¸æ“‡è³‡æ–™åº«ä½ç½®ï¼ˆå»ºè­°é¸æ“‡äºæ´²åœ°å€ï¼‰

#### 3. å»ºç«‹æœå‹™å¸³æˆ¶
1. å‰å¾€ã€Œå°ˆæ¡ˆè¨­å®šã€â†’ã€Œæœå‹™å¸³æˆ¶ã€
2. é»æ“Šã€Œç”¢ç”Ÿæ–°çš„ç§å¯†é‡‘é‘°ã€
3. ä¸‹è¼‰ JSON æª”æ¡ˆ
4. è¤‡è£½ JSON æª”æ¡ˆçš„å®Œæ•´å…§å®¹

#### 4. è¨­å®šç’°å¢ƒè®Šæ•¸
å°‡ JSON å…§å®¹è¨­å®šç‚º `FIREBASE_CONFIG_JSON` ç’°å¢ƒè®Šæ•¸ï¼š

**Railway è¨­å®šï¼š**
```
FIREBASE_CONFIG_JSON={"type": "service_account", "project_id": "your-project", ...}
```

**æœ¬åœ°é–‹ç™¼ (.env)ï¼š**
```
FIREBASE_CONFIG_JSON={"type": "service_account", "project_id": "your-project", ...}
```

### ğŸ” Firebase ç›£æ§æŒ‡ä»¤

#### æª¢æŸ¥é€£æ¥ç‹€æ…‹
```
@firebase           # æŸ¥çœ‹ Firebase é€£æ¥å’Œçµ±è¨ˆè³‡è¨Š
@debug_env          # è¨ºæ–·ç’°å¢ƒè®Šæ•¸è¨­å®š
```

#### å‚™ä»½åŠŸèƒ½
```
@backup             # æŸ¥çœ‹ Firebase å‚™ä»½ç‹€æ…‹  
```

### ğŸ’¡ Firebase æœ€ä½³å¯¦è¸

#### è³‡æ–™çµæ§‹è¨­è¨ˆ
- **é›†åˆéš”é›¢**ï¼šä¸åŒé¡å‹è³‡æ–™å­˜åœ¨ä¸åŒé›†åˆ
- **æ–‡ä»¶ ID è¦ç¯„**ï¼šä½¿ç”¨æœ‰æ„ç¾©çš„ ID å‘½å
- **å·¢ç‹€è³‡æ–™**ï¼šåˆç†ä½¿ç”¨å­é›†åˆå’Œå·¢ç‹€ç‰©ä»¶

#### å®‰å…¨è¦å‰‡å»ºè­°
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /bot_config/{document} {
      allow read, write: if true; // é–‹ç™¼éšæ®µï¼Œç”Ÿç”¢ç’°å¢ƒæ‡‰åŠ å¼·é™åˆ¶
    }
    match /backups/{document} {
      allow read, write: if true;
    }
  }
}
```

#### æ•ˆèƒ½å„ªåŒ–
- **æ‰¹æ¬¡æ“ä½œ**ï¼šä½¿ç”¨ batch å¯«å…¥æ¸›å°‘è«‹æ±‚æ¬¡æ•¸
- **ç´¢å¼•å»ºç«‹**ï¼šç‚ºæŸ¥è©¢æ¬„ä½å»ºç«‹é©ç•¶ç´¢å¼•
- **å¿«å–ç­–ç•¥**ï¼šé©ç•¶ä½¿ç”¨æœ¬åœ°å¿«å–æ¸›å°‘è®€å–

### ï¿½ ç–‘é›£æ’è§£

#### å¸¸è¦‹å•é¡Œ
**Q: Firebase é€£æ¥å¤±æ•—ï¼Ÿ**
A: æª¢æŸ¥ `FIREBASE_CONFIG_JSON` æ ¼å¼æ˜¯å¦æ­£ç¢ºï¼Œç¢ºä¿ JSON å®Œæ•´ç„¡èª¤

**Q: æ¬Šé™è¢«æ‹’çµ•ï¼Ÿ**
A: ç¢ºèª Firestore å®‰å…¨è¦å‰‡å…è¨±è®€å¯«æ“ä½œ

**Q: è³‡æ–™æœªåŒæ­¥ï¼Ÿ**
A: æª¢æŸ¥ç¶²è·¯é€£æ¥ï¼ŒFirebase éœ€è¦ç©©å®šçš„ç¶²è·¯ç’°å¢ƒ

#### é™¤éŒ¯å·¥å…·
```
@debug_env          # æª¢æŸ¥ç’°å¢ƒè®Šæ•¸è¨­å®š
@firebase           # æŸ¥çœ‹ Firebase ç‹€æ…‹å’Œçµ±è¨ˆ
```

### å•é¡Œå›å ±
è«‹åœ¨ Issue ä¸­åŒ…å«ï¼š
- å•é¡Œæè¿°
- å¾©ç¾æ­¥é©Ÿ  
- åŸ·è¡Œç’°å¢ƒè³‡è¨Š
- ç›¸é—œæˆªåœ–æˆ–æ—¥èªŒ

## ğŸ“œ æˆæ¬Šæ¢æ¬¾

MIT License - è©³è¦‹ LICENSE æª”æ¡ˆ

## ğŸ”— ç›¸é—œæ–‡ä»¶

- ğŸ“š `FIREBASE_SETUP_GUIDE.md` - **Firebase å®Œæ•´è¨­å®šæŒ‡å—**ï¼ˆæ¨è–¦æ–°æ‰‹ï¼‰
- ğŸ”§ `FIREBASE_SETUP.md` - Firebase è©³ç´°è¨­å®šèªªæ˜
- ğŸ—ï¸ `AI_è¼”åŠ©æ¡ˆä¾‹_å¤šç¾¤çµ„LINE_Botæ¶æ§‹é‡æ§‹.md` - æ¶æ§‹é‡æ§‹æ¡ˆä¾‹
- ğŸ“Š `å„²å­˜ç­–ç•¥åˆ†æ.md` - è³‡æ–™å„²å­˜ç­–ç•¥åˆ†æ

## ğŸŒ å¤–éƒ¨é€£çµ

- [LINE Developers](https://developers.line.biz/)
- [Railway éƒ¨ç½²å¹³å°](https://railway.app)
- [Firebase Console](https://console.firebase.google.com/)
- [Flask å®˜æ–¹æ–‡ä»¶](https://flask.palletsprojects.com/)
- [APScheduler æ–‡ä»¶](https://apscheduler.readthedocs.io/)

---

â­ å¦‚æœé€™å€‹å°ˆæ¡ˆå°ä½ æœ‰å¹«åŠ©ï¼Œè«‹çµ¦å€‹ Starï¼

ğŸ¯ **ç‰¹è‰²åŠŸèƒ½ï¼šçœŸæ­£çš„å¤šç¾¤çµ„ç¨ç«‹ç®¡ç† + Firebase ä¼æ¥­ç´šé›²ç«¯å­˜å„²ï¼**